## Overview
This README File has been found in a repository called `COVID_YAMH`. 

The code in this replication package constructs the analysis file with data from the Millennium Cohort Study stored on the UK Data Service using R. One main file `_targets` runs all of the code in the `\R` folder to generate the data for the figure and tables in the corresponding manuscript. 

The replicator should expect the code to run for about 1.06 hours.
## Data Availability and Provenance Statements
The paper uses data from the United Kingdom's (UK) Millennium Cohort Study (MCS) Waves 1 through 7 (CLS, 2022a-e; CLS, 2020a–b) and the COVID-19 Survey in Five National Longitudinal Cohort Studies (UCL, 2022). 

The full datasets and documentation can be downloaded from the UK Data Service (UKDS). The UKDS considers this data to be safeguarded and does not allow for redistribution or commercial use of data. Permissions as per https://ukdataservice.ac.uk/terms-and-conditions/ have been obtained, specifically adherence to an [End User License Agreement](https://ukdataservice.ac.uk/app/uploads/cd137-enduserlicence.pdf) and wave-specific conditions related to respondent identification restrictions. 
### Statement about Rights
The manuscript authors obtained an End User License for each dataset and have been provided legitimate access to and permission to use the data in this paper. The authors certify that the data was used for academic purposes alone and not for commercial purposes. 
### Details on Each Data Source
This paper uses data from all waves of MCS data collection through COVID-19. MCS data is organised such that each wave of the mainstage survey is considered a separate study and the COVID-19 study is also help separately. Details on how to find each data source is contained in **Table 1**.

**Table 1**: *A table containing links to each wave of MCS data collection used in the manuscript*

| Data Name                                                                                                                                                                           | Version | UK Data Service Link                                                                  | Reference    |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ------------------------------------------------------------------------------------- | ------------ |
| “Millennium Cohort Study: Age 9 months, Sweep 1, 2001”                                                                                                                              | 14.0    | [Study ID 4683](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=4683) | (CLS, 2022a) |
| "Millennium Cohort Study: Age 3, Sweep 2, 2004"                                                                                                                                     | 11.0    | [Study ID 5350](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=5350) | (CLS, 2022b) |
| "Millennium Cohort Study: Age 5, Sweep 3, 2006"                                                                                                                                     | 9.0     | [Study ID 5795](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=5795) | (CLS, 2022c) |
| "Millennium Cohort Study: Age 7, Sweep 4, 2008"                                                                                                                                     | 8.0     | [Study ID 6411](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=6411) | (CLS, 2020a) |
| "Millennium Cohort Study: Age 11, Sweep 5, 2012"                                                                                                                                    | 5.0     | [Study ID 7464](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=7464) | (CLS, 2020b) |
| "Millennium Cohort Study: Age 14, Sweep 6, 2015"                                                                                                                                    | 7.0     | [Study ID 8156](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=8156) | (CLS, 2022d) |
| "Millennium Cohort Study: Age 17, Sweep 7, 2018"                                                                                                                                    | 2.0     | [Study ID 8682](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=8682) | (CLS, 2022e) |
| “COVID-19 Survey in Five National Longitudinal Cohort Studies: Millennium Cohort Study, Next Steps, 1970 British Cohort Study and 1958 National Child Development Study, 2020-2021” | 4.0     | [Study ID 8658](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=8658) | (UCL, 2022)  |

At each of the dataset UKDS pages provided in **Table 1**, click "Access Data", which is available to UKDS account holders. The data will then be added to the user's account, which means it can be added to a project. 

Create a new project, including filling a brief description of the project. Assign the data to the project, read and agree to the terms and conditions of use. Note the specifications of non-commercial use and study-specific linkage conditions. Once access is granted, the survey data file will show in the User's project page, with a green indicator labelled "Active", and can now be selected and downloaded as a zip file in `TAB` file format. 
## Dataset List
Create a folder : `MCS_data`/ within the local version of this repository, save the data from the UKDS here. 

The unzipped file should have 8 folders corresponding to each relevant wave of MCS mainstage survey data collection. For the purposes of successfully using this replication package, the folders should be renamed `mcs_Cov/`, `mcs_wave1/`, `mcs_wave2/`, `mcs_wave3/`, `mcs_wave4/`, `mcs_wave5/`, `mcs_wave6/`, and `mcs_wave7/`. 

The UKDS downloaded and unzipped files are organised into two folders and two files, named `mrdoc` (folder), `tab` (folder), an information table file (`.rtf`) and a ReadMe (`.htm`) file. The information tables describes all the files in each folder and ReadMe files document edition information and curation procedures. The `mrdoc` folder contains all written survey related information and data dictionaries, including technical reports, questionnaires, and user guides. 

Each`tab` folder contains all of the respective study's data files. This raw survey data is downloaded as `.tab` files. Table 2 lists all of the files relevant to the paper and the file path as per the download instructions:

**Table 2**:
*A tabulation of each relevant dataset and respective file path as sourced from the UKDS*

| Relevant Data Files                                                                                   | File Path        |
| ----------------------------------------------------------------------------------------------------- | ---------------- |
| `covid-19_wave1_survey_cls.tab`<br>`covid-19_wave2_survey_cls.tab`<br>`covid-19_wave3_survey_cls.tab` | `MCS_Cov/tab/`   |
| `mcs1_cm_derived.tab`<br>`mcs1_family_derived.tab`<br>`mcs1_hhgrid.tab`<br>`mcs1_parent_derived.tab`  | `mcs_wave1/tab/` |
| `mcs2_cm_derived.tab`<br>`mcs2_family_derived.tab`<br>`mcs2_hhgrid.tab`<br>`mcs2_parent_derived.tab`  | `mcs_wave2/tab/` |
| `mcs3_cm_derived.tab`<br>`mcs3_family_derived.tab`<br>`mcs3_hhgrid.tab`<br>`mcs3_parent_derived.tab`  | `mcs_wave3/tab/` |
| `mcs4_cm_derived.tab`<br>`mcs4_family_derived.tab`<br>`mcs4_hhgrid.tab`<br>`mcs4_parent_derived.tab`  | `mcs_wave4/tab/` |
| `mcs5_cm_derived.tab`<br>`mcs5_family_derived.tab`<br>`mcs5_hhgrid.tab`<br>`mcs5_parent_derived.tab`  | `mcs_wave5/tab/` |
| `mcs6_cm_derived.tab`<br>`mcs6_family_derived.tab`<br>`mcs6_hhgrid.tab`<br>`mcs6_parent_derived.tab`  | `mcs_wave6/tab/` |
| `mcs7_cm_derived.tab`<br>`mcs7_family_derived.tab`<br>`mcs7_hhgrid.tab`<br>`mcs7_parent_derived.tab`  | `mcs_wave7/tab/` |
*Notes*: each file path assumes the R workspace is set up such that files are saved within the `MCS_data/` folder as set up in the working directory. These paths were built to run on a Mac, for Windows computer, you would need to supplement the front-slash (`/`) with a back-slash (`\`).
## Computational requirements
The specific code and lock.files used to generate the results in our article are available in this repository. This section discusses the computational requirements, including shared library or code packages, required software, and specific computing hardware that are useful for replication. 
### Software Requirements
The code here was last ran using RStudio (version 2024.04.1+748) with R (version 4.4.0, 2024-04-24).  Upon opening RStudio, ensure the necessary packages are downloaded by running the `renv::restore()`
### Memory and Runtime Requirements
The approximate time needed to reproduce the analyses on a standard 2024 desktop machine 65 minutes. 

The code was last run on a **2022 M2 Apple MacBook Air laptop operating with MacOS version Sonoma 14.4.1**. 
## Description of Programs and Code
### The pipeline
The `_targets.R` file contains directions for which files from the R folder should be read and when. Amongst other benefits, the Targets pipeline framework ensures all programs are consistently ran in the same order, and any updates to a function or a file will cause the pipeline to re-run and update all outputs connected to the update. Another benefit of the targets program is that all files are sourced within the workspace. In other words, you can keep all the file paths the same in the pipeline (so long at the data downloads follow the instructions in this README file). Table 3 summarises each step in the pipeline. 

**Table 3:**
*A table listing the targets generated in the `_targets.R` file, the functions that generate these targets and the purpose of each target*

| Target                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Function                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Notes                                                                                                                                                                                                                                                                                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| cov_file<br>cov2_file<br>cov3_file<br>hh7_grid_file<br>hh6_grid_file<br>hh5_grid_file<br>hh4_grid_file<br>hh3_grid_file<br>hh2_grid_file<br>hh1_grid_file<br>family7_derived_file<br>family6_derived_file<br>family5_derived_file<br>family4_derived_file<br>family3_derived_file<br>family2_derived_file<br>family1_derived_file<br>cm7_derived_file<br>cm6_derived_file<br>cm5_derived_file<br>cm4_derived_file<br>cm3_derived_file<br>cm2_derived_file<br>cm1_derived_file<br>cm4_int_file<br>cm5_int_file<br>cm6_int_file<br>cm7_int_file<br>parent5_derived_file<br>parent6_derived_file | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | All relevant files are loaded into local environment, and can be read into following pipeline functions                                                                                                                                                                                                                        |
| working_data                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | combine_functions_dfs(<br>       cov_file, <br>       cm6_int_file,<br>       cm5_int_file,<br>       hh7_grid_file,<br>       hh6_grid_file,<br>       hh5_grid_file,<br>       hh4_grid_file,<br>       hh3_grid_file,<br>       hh2_grid_file,<br>       hh1_grid_file,<br>       family7_derived_file,<br>       family6_derived_file,<br>       family5_derived_file,<br>       family4_derived_file,<br>       family3_derived_file,<br>       family2_derived_file,<br>       family1_derived_file,<br>       parent6_derived_file,<br>       parent5_derived_file,<br>       cm7_derived_file,<br>       cm6_derived_file,<br>       cm5_derived_file,<br>       cm4_derived_file,<br>       cm3_derived_file,<br>       cm2_derived_file,<br>       cm1_derived_file)                                                                                        | Creates a dataframe with the first wave of the CLS COVID-19 survey and the MCS mainstage survey. All variables from all waves are included.                                                                                                                                                                                    |
| selected_df                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | select_analysis_vars(<br>       working_data)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Calls a the `working_data` dataframe. Selects and relevels variables of interest. Filters such that only people who participated in the seventh mainstage survey wave and the first CLS COVID-19 wave were included.                                                                                                           |
| alloutcomes_wide                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | allcovwaves_wide_df(<br>       cov_file,<br>       cov2_file,<br>       cov3_file,<br>       cm7_int_file,<br>       cm6_int_file,<br>       cm5_int_file,<br>       cm4_int_file,<br>       hh7_grid_file,<br>       hh6_grid_file,<br>       hh5_grid_file,<br>       hh4_grid_file,<br>       hh3_grid_file,<br>       hh2_grid_file,<br>       hh1_grid_file,<br>       family7_derived_file,<br>       family6_derived_file,<br>       family5_derived_file,<br>       family4_derived_file,<br>       family3_derived_file,<br>       family2_derived_file,<br>       family1_derived_file,<br>       parent6_derived_file,<br>       parent5_derived_file,<br>       cm7_derived_file,<br>       cm6_derived_file,<br>       cm5_derived_file,<br>       cm4_derived_file,<br>       cm3_derived_file,<br>       cm2_derived_file,<br>       cm1_derived_file) | Constructs a wide dataset containing all waves of data from the CLS COVID-19 survey.                                                                                                                                                                                                                                           |
| imputed.w1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | multipleimpute.w1_function(<br>       selected_df)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | An imputation model that generates 30 potential wide datasets, which are then pooled together during analysis.                                                                                                                                                                                                                 |
| imputed_sib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | multipleimpute_sibcv.w1(<br>       selected_df)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | An imputation model that generates 30 potential wide datasets, which are then pooled together during analysis.                                                                                                                                                                                                                 |
| imputed.w2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | multipleimpute.w2_function<br>       alloutcomes_wide)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | An imputation model that generates 30 potential wide datasets, which are then pooled together during analysis.                                                                                                                                                                                                                 |
| imputed.w3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | multipleimpute.w3_function(<br>       alloutcomes_wide)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | An imputation model that generates 30 potential wide datasets, which are then pooled together during analysis.                                                                                                                                                                                                                 |
| imputed_w0.3_long                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | mi_0.3_long(<br>       alloutcomes_wide)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | An imputation model that generates 30 potential long datasets, which are then pooled together during analysis.                                                                                                                                                                                                                 |
| Figure1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Figure1_function(<br>       imputed.w1)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Generates a pdf file and a `gg` object for Figure 1                                                                                                                                                                                                                                                                            |
| Table01_w1.cc.desc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | descriptive_table(<br>       selected_df)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Generates a table of the descriptives for the sample. The Table includes summaries of variables with missing observations. Imputed variables must be corrected using selected descriptive information generated from the imputed data frame.                                                                                   |
| TableA2_w2.cc.desc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | TableA02_w2_descriptives(<br>       alloutcomes_wide)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Generates a table of the descriptives for the sample. The Table includes summaries of variables with missing observations. Imputed variables must be corrected using selected descriptive information generated from the imputed data frame.                                                                                   |
| TableA2_w3.cc.desc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | TableA02_w3_descriptives(<br>       alloutcomes_wide)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Generates a table of the descriptives for the sample. The Table includes summaries of variables with missing observations. Imputed variables must be corrected using selected descriptive information generated from the imputed data frame.                                                                                   |
| Table01_w1.mi.desc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | descriptives_mi.cv.w1(<br>       imputed.w1)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Provides a small dataframe with information that corrects the descriptive information for the imputed outcome and time-invariant explanatory variables.                                                                                                                                                                        |
| TableA01_w2.mi.desc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | descriptives_mi.cv.w2(<br>       imputed.w2)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Provides a small dataframe with information that corrects the descriptive information for the imputed outcome and time-invariant explanatory variables.                                                                                                                                                                        |
| TableA01_w3.mi.desc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | descriptives_mi.cv.w3(<br>       imputed.w3)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Provides a small dataframe with information that corrects the descriptive information for the imputed outcome and time-invariant explanatory variables.                                                                                                                                                                        |
| descriptives_alone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | descriptive_table_alone(<br>       selected_df)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | A table of descriptives verbally reported in the manuscript.                                                                                                                                                                                                                                                                   |
| descriptives_na                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | descriptive_table_missing(<br>       selected_df)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | A table of descriptives verbally reported in the manuscript.                                                                                                                                                                                                                                                                   |
| TableA01_crosstab                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | crosstab_table(<br>       alloutcomes_wide)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Summarise sample information regarding MCS members who participated in all three waves. The code generates two files, each with a crosstab of W1 x W(2-3). These two files must be combined by hand using a word processor. In the manuscript tables, the authors also included two rows of N via summing each column by hand. |
| Table02_mi                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | modelsummary_w1mi(<br>       imputed.w1)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Main analytical model                                                                                                                                                                                                                                                                                                          |
| Table03_mi                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | modelsummary_sib(<br>       imputed_sib)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Sibling-only analysis                                                                                                                                                                                                                                                                                                          |
| Table04_mi                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | modelsummary_Table4(<br>       imputed.w1,<br>       imputed.w2,<br>       imputed.w3)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 3-wave lagged dependent variable OLS analysis (1 LDV OLS analysis per wave)                                                                                                                                                                                                                                                    |
| TableA03_mi                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | modelsummary_TableA3(<br>       imputed.w1,<br>       imputed.w2,<br>       imputed.w3)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Estimated association between family living arrangements and young adult mental health during three periods of COVID-19, interacting living arrangements with gender, on a single sample of those observed in all three waves of the CLS COVID-19 survey                                                                       |
| femodel_TableA04_mi                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | fixedmodels_0.3(<br>      imputed_w0.3_long)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | List of models summarising fixed effects estimating the association between family living arrangements and change in young adult mental health, from before and three periods during the pandemic, interacting living arrangements with gender.                                                                                |
| TableA04_fe                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | modelsummary_femodels(<br>               femodel_TableA04_mi,<br>               "A04_Table_fe")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Tabulation of fixed effect models                                                                                                                                                                                                                                                                                              |
### User-made functions contained in the `R` folder
The objects created in the pipeline are all called with a user-made function. Every user-made function is stored and read in the `R` folder.  Table 4 summarises each file in the R folder, and which pipeline objects are associated with each file.

**Table 4:**
*A table describing the files in the `R` folder  by file name, the object created in the `_targets.R` pipeline with the functions defined in the file, and any relevant notes pertaining to each file* 

| File                          | Pipeline Objects                                                                             | Notes                                                                                                                                                                                                    |
| ----------------------------- | -------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| builddf_a.base_functions.R    | N/A                                                                                          | This file contains builder functions required in more than one function throughout analysis (e.g., load tab file functions, MCS-specific raw data filtering functions)                                   |
| builddf_b.combine_functions.R | data frame: `working_data`                                                                   |                                                                                                                                                                                                          |
| builddf_c.select_vars.R       | data frame: `selected_df`                                                                    |                                                                                                                                                                                                          |
| builddf_d.covwaves_wide.R     | data frame: `alloutcomes_wide`                                                               |                                                                                                                                                                                                          |
| builddf_e.MI_w0123.R          | data frame: `imputed_wx`, where `x` = {1:3}                                                  |                                                                                                                                                                                                          |
| builddf_f.MI_w0123.long.R     | data frame: `imputed_w0x_long`, where `x` = {1:3}                                            |                                                                                                                                                                                                          |
| descriptives_z.na.alone.R     | gt tables: `descriptives_alone` and `descriptives_na`                                        |                                                                                                                                                                                                          |
| Figure01.R                    | gg objects: `Figure01_cc.K6` and `Figure01_cc.WB`                                            | This file will also save the figures as PDFs into the `\Figures_Tables` folder. For the manuscript, the authors combined these pdfs by hand.                                                             |
| Table01_A01_mi.corrections.R  | mipo summary objects: `Table01_w1.mi.desc`, `TableA01_w2.mi.desc`, and `TableA01_w3.mi.desc` | These can be viewed in the R environment and appear as data frames. The information is added by hand to their respective descriptive table.                                                              |
| Table01_descriptives.R        | gt tables: `Table01_w1.cc.desc`                                                              | Information is for complete case only. Variables that need imputation are incorrect. Incorrectly summarised information needs to be added by hand via the `Table01_mi.descriptives` mipo summary object. |
| Table02_main.analysis.R       | gt table: `Table02_mi`                                                                       | This file will also save table as an .rtf file into the `\Figures_Tables` folder.                                                                                                                        |
| Table03_sib.analysis.R        | gt table: `Table03_mi`                                                                       | This file will also save table as an .rtf file into the `\Figures_Tables` folder.                                                                                                                        |
| Table04_A03_3w.analysis.R     | gt table: `Table04_mi` <br>gt table: `TableA03`                                              | This file will also save two tables as .rtf files into the `\Figures_Tables` folder.                                                                                                                     |
| TableA01_descriptives.xtab.R  | gt table: `TableA01_crosstab`                                                                | This file will also save table as an .rtf file into the `\Figures_Tables` folder.                                                                                                                        |
| TableA02_descriptives.R       | gt tables: `TableA2_w2.cc.desc` and `TableA01_w3.mi.desc`                                    | This file will also save tables as .rtf files into the `\Figures_Tables` folder. For the manuscript, the authors combined these files by hand.                                                           |
| TableA04_fe.models.R          | `femodel_TableA03_mi` and gt table: `TableA03_mi`                                            | This file will also save table as an .rtf file into the `\Figures_Tables` folder.                                                                                                                        |
| Tables.PeerReview_xtraxtab.R  | gt tables: `inc_res_xtab` and `inc_res_ols`                                                  | This file will also save tables as .rtf files into the `\Figures_Tables` folder.                                                                                                                         |
| var_age17_residence.R         | N/A                                                                                          |                                                                                                                                                                                                          |
| var_covid_covars.R            | N/A                                                                                          |                                                                                                                                                                                                          |
| var_ethnicity.R               | N/A                                                                                          |                                                                                                                                                                                                          |
| var_family_income.R           | N/A                                                                                          |                                                                                                                                                                                                          |
| var_outcome_lag_covid.R       | N/A                                                                                          |                                                                                                                                                                                                          |
| var_parent_education.R        | N/A                                                                                          |                                                                                                                                                                                                          |
| var_parent_structure.R        | N/A                                                                                          |                                                                                                                                                                                                          |
| var_region.R                  | N/A                                                                                          |                                                                                                                                                                                                          |
| var_siblingfactors.R          | N/A                                                                                          |                                                                                                                                                                                                          |
*Notes:* All dataframes are generated into the targets environment. To load and inspect the dataframe in the R environment, type the command `tar_load(X)` into the console, replace the 'X' with the name of the pipeline object of interest. `gt table` and `gg` objects are generated into a readable format that is stored in the `\Figures_Tables\` file (either as a pdf for gg object or rtf file for gt table objects).  Files which start with '`var_`' are user made variable derivation functions, and are called in `builddf_b.combine_functions.R` to create the initial `working_data` or in `builddf_d.covwaves_wide.R` dataset.
## Instructions to Replicators

- Download or clone the repository onto a local R working directory
- run `renv::restore()` to install necessary packages to run the program
- Create the empty `MCS_data/` folder and download data from the UKDS
- Create an empty `Figures_Tables/` folder to store output
- Run command `targets::tar_make()` in the console
- After the program has finished running, type `targets::ar_load_everything()` to load all the generated targets into the working environment
## List of Program Outputs
The provided code reproduces the files used to write the manuscript and respond to peer review. All tables produced here require data downloaded from the UKDS. Some Table specifics have been generated by hand (e.g., formatting .rtf files and combining tables). Table  5 summarises the Figures and Tables used in the manuscript, appendix, and peer review response by name and by output file, which is stored in the `Figures_Tables` folder.

**Table 5:**
A table listing each figure and table generated for the manuscript, appendix, and peer review. Each figure and table is also listed with their output file name and any notes needed to recreate what is seen in the manuscript.

| Name                 | Output File Name                                                                                                                                   | Note                                                                                                                                                                                                                                                                                     |
| -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Figure 1             | 01_Figure.pdf                                                                                                                                      | The functions produce a .pdf file –  for each outcome measure. These need to be combined by hand to produce the single chart in the paper.                                                                                                                                               |
| Table 1              | 01_Table_uncorrected.rtf, Table01_mi.descriptives (R dataframe)                                                                                    | The descriptive table ('01_Table_uncorrected') does not account for imputed values. Imputed values are generated separately and, once generated, can be loaded into the R environment and viewed, with the `View()` command. The original Table is then corrected and formatted by hand. |
| Table 2              | 02_Table_mi.interaction.rtf                                                                                                                        |                                                                                                                                                                                                                                                                                          |
| Table 3              | 03_Table_mi.sib.rtf                                                                                                                                |                                                                                                                                                                                                                                                                                          |
| Table 4              | 04_Table_3w.main.rtf                                                                                                                               |                                                                                                                                                                                                                                                                                          |
| Appendix Table A1    | A01_Table-crosstab.wave12.rtf, A01_Table-crosstab.wave13.rtf                                                                                       | Requires simple addition and combining by hand.                                                                                                                                                                                                                                          |
| Appendix Table A2    | A02_Table.w2_descriptives.rtf, A02_Table.w3_descriptives.rtf, TableA01_w2.mi.descriptives (R dataframe), TableA01_w3.mi.descriptives (R dataframe) | Like Table 1, the descriptive tables initially generated need to be corrected by hand. Requires table combination and correction to the estimates of imputed variables                                                                                                                   |
| Appendix Table A3    | A03_Table-3w.main.rtf                                                                                                                              |                                                                                                                                                                                                                                                                                          |
| Appendix Table A4    | A04_Table_fe.rtf                                                                                                                                   |                                                                                                                                                                                                                                                                                          |
| Extra Table: Missing | 0X_Table_desc.na.rtf                                                                                                                               |                                                                                                                                                                                                                                                                                          |
| Extra Table: Alone   | 0X_Table_desc.alone.rtf                                                                                                                            |                                                                                                                                                                                                                                                                                          |
## References
University of London, Institute of Education, Centre for Longitudinal Studies (CLS) (2022). _Millennium Cohort Study: Age 9 months, Sweep 1, 2001_. [data collection]. _14th Edition._ UK Data Service. SN: 4683, [DOI: http://doi.org/10.5255/UKDA-SN-4683-6](http://doi.org/10.5255/UKDA-SN-4683-6)

University of London, Institute of Education, Centre for Longitudinal Studies (CLS) (2022). _Millennium Cohort Study: Age 3, Sweep 2, 2004_. [data collection]. _11th Edition._ UK Data Service. SN: 5350, [DOI: http://doi.org/10.5255/UKDA-SN-5350-6](http://doi.org/10.5255/UKDA-SN-5350-6)

University of London, Institute of Education, Centre for Longitudinal Studies (CLS) (2022). _Millennium Cohort Study: Age 5, Sweep 3, 2006_. [data collection]. _9th Edition._ UK Data Service. SN: 5795, [DOI: http://doi.org/10.5255/UKDA-SN-5795-6](http://doi.org/10.5255/UKDA-SN-5795-6)

University of London, Institute of Education, Centre for Longitudinal Studies (CLS). (2020). _Millennium Cohort Study: Fourth Survey, 2008_. [data collection]. _8th Edition._ UK Data Service. SN: 6411, [DOI: http://doi.org/10.5255/UKDA-SN-6411-8](http://doi.org/10.5255/UKDA-SN-6411-8)

University of London, Institute of Education, Centre for Longitudinal Studies (CLS). (2020). _Millennium Cohort Study: Fifth Survey, 2012_. [data collection]. _5th Edition._ UK Data Service. SN: 7464, [DOI: http://doi.org/10.5255/UKDA-SN-7464-5](http://doi.org/10.5255/UKDA-SN-7464-5)

University of London, Institute of Education, Centre for Longitudinal Studies (CLS). (2020). _Millennium Cohort Study: Sixth Survey, 2015_. [data collection]. _7th Edition._ UK Data Service. SN: 8156, [DOI: http://doi.org/10.5255/UKDA-SN-8156-7](http://doi.org/10.5255/UKDA-SN-8156-7)

University of London, Institute of Education, Centre for Longitudinal Studies (CLS). (2022). _Millennium Cohort Study: Age 17, Sweep 7, 2018_. [data collection]. _2nd Edition._ UK Data Service. SN: 8682, [DOI: http://doi.org/10.5255/UKDA-SN-8682-2](http://doi.org/10.5255/UKDA-SN-8682-2)

University College London, UCL Institute of Education, Centre for Longitudinal Studies (CLS). (2022). _COVID-19 Survey in Five National Longitudinal Cohort Studies: Millennium Cohort Study, Next Steps, 1970 British Cohort Study and 1958 National Child Development Study, 2020-2021_. [data collection]. _4th Edition._ UK Data Service. SN: 8658, [DOI: http://doi.org/10.5255/UKDA-SN-8658-4](http://doi.org/10.5255/UKDA-SN-8658-4)

---
